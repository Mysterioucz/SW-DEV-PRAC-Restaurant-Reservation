@startuml
left to right direction
title Restaurant Reservation System

' Define actors
actor Guest
actor "Registered User" as User
actor Admin

' Service boxes
package "Service" {

  rectangle "Auth" {
    usecase (Login\nPOST /api/auth/login) as Login
    usecase (Register\nPOST /api/register) as Register
    usecase (Logout\nGET /api/auth/logout) as Logout
  }

  rectangle "Restaurants" {
    usecase (View All Restaurants\nGET /api/restaurants) as ViewRestaurants
    usecase (View Restaurant Detail\nGET /api/restaurants/{id}) as ViewRestaurantDetail
    usecase (Create Restaurant\nPOST /api/restaurants) as CreateRestaurant
    usecase (Edit Restaurant\nPUT /api/restaurants/{id}) as EditRestaurant
    usecase (Delete Restaurant\nDELETE /api/restaurants/{id}) as DeleteRestaurant
  }

  rectangle "Reservations" {
    usecase (View Own Reservations\nGET /api/reservations) as ViewOwnReservations
    usecase (View Reservation Detail\nGET /api/reservations/{id}) as ViewReservationDetail
    usecase (Make Reservation\nPOST /api/reservations) as MakeReservation
    usecase (Edit Own Reservation\nPUT /api/reservations/{id}) as EditOwnReservation
    usecase (Cancel Own Reservation\nDELETE /api/reservations/{id}) as CancelOwnReservation
    usecase (View All Reservations\nGET /api/reservations) as ViewAllReservations
    usecase (Edit Any Reservation\nPUT /api/reservations/{id}) as EditAnyReservation
    usecase (Cancel Any Reservation\nDELETE /api/reservations/{id}) as CancelAnyReservation
  }
}

' Notes
note right of MakeReservation
  Limited to 3 reservations per user
  Must be within restaurant
  operating hours
end note

note right of ViewRestaurants
  Public access
  No authentication required
end note

note right of CreateRestaurant
  Admin only
  Restaurant info includes
  name, address, telephone,
  opening hours
end note

' Guest relationships
Guest --> Register
Guest --> Login
Guest --> ViewRestaurants

' User relationships
User --> Login
User --> Logout
User --> ViewRestaurants
User --> ViewRestaurantDetail
User --> MakeReservation
User --> ViewOwnReservations
User --> ViewReservationDetail
User --> EditOwnReservation
User --> CancelOwnReservation

' Admin relationships
Admin --> Login
Admin --> Logout
Admin --> ViewRestaurants
Admin --> ViewRestaurantDetail
Admin --> CreateRestaurant
Admin --> EditRestaurant
Admin --> DeleteRestaurant
Admin --> MakeReservation
Admin --> ViewOwnReservations
Admin --> ViewReservationDetail
Admin --> EditOwnReservation
Admin --> CancelOwnReservation
Admin --> ViewAllReservations
Admin --> EditAnyReservation
Admin --> CancelAnyReservation

' Include relationships
MakeReservation ..> ViewRestaurantDetail : <<include>>
EditOwnReservation ..> ViewReservationDetail : <<include>>

@enduml
